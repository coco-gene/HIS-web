(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28366c5c"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(t,e,i){var o=a(),s=t-o,r=20,c=0;e="undefined"===typeof e?500:e;var d=function t(){c+=r;var a=Math.easeInOutQuad(c,o,s,e);l(a),c<e?n(t):i&&"function"===typeof i&&i()};d()}},"15d7":function(t,e,i){"use strict";i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s}));var n=i("b775");function l(t){return Object(n["a"])({url:"/NonDrugModel/listModel",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/NonDrugModel/updateModel",method:"post",params:{modelId:t.id},data:t})}function o(t){return Object(n["a"])({url:"/NonDrugModel/createModel",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/NonDrugModel/deleteModel",method:"post",params:{ids:t}})}},"33b8":function(t,e,i){"use strict";i("ba7f")},a6b2:function(t,e,i){"use strict";i.d(e,"d",(function(){return l})),i.d(e,"c",(function(){return a})),i.d(e,"e",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return r}));var n=i("b775");function l(t){return Object(n["a"])({url:"/DmsNonDrug/list",method:"get",params:t})}function a(){return Object(n["a"])({url:"/DmsNonDrug/listAll",method:"post"})}function o(t){return Object(n["a"])({url:"/DmsNonDrug/update/"+t.id,method:"post",data:t})}function s(t){return Object(n["a"])({url:"/DmsNonDrug/delete",method:"post",params:{ids:t}})}function r(t){return Object(n["a"])({url:"/DmsNonDrug/create",method:"post",data:t})}},ba7f:function(t,e,i){},e8cc:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"div1"},[i("el-container",[i("transition",{attrs:{name:"el-zoom-in-left"}},[i("el-aside",{staticStyle:{"margin-top":"0",background:"white",padding:"0 0 0 0"},attrs:{width:t.asidewidth}},[i("aside",{staticStyle:{height:"50px",margin:"0 0 0 0"}},[i("el-tag",{attrs:{size:"large"}},[t._v("非药品模板")])],1),t._v(" "),i("div",{staticStyle:{padding:"0 10px 0 10px"}},[t.isaside?t._e():i("el-card",[i("el-form",{staticStyle:{background:"white"},attrs:{model:t.listQuery,inline:""}},[i("el-form-item",{staticStyle:{width:"280px"},attrs:{label:"模板名称:"}},[i("el-input",{attrs:{placeholder:"模板名称"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"280px"},attrs:{label:"范围:"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"请选择范围",clearable:""},model:{value:t.listQuery.scope,callback:function(e){t.$set(t.listQuery,"scope",e)},expression:"listQuery.scope"}},t._l([{key:0,value:"个人"},{key:1,value:"科室"},{key:2,value:"全院"}],(function(t){return i("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"280px"},attrs:{label:"类型:"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"请选择类型",clearable:""},model:{value:t.listQuery.type,callback:function(e){t.$set(t.listQuery,"type",e)},expression:"listQuery.type"}},t._l([{key:0,value:"检查"},{key:1,value:"检验"},{key:2,value:"处置"}],(function(t){return i("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1)],1),t._v(" "),i("el-form-item",{staticStyle:{width:"400px"}},[t.isaside?t._e():i("el-button",{attrs:{type:"primary"},on:{click:t.searchModel}},[t._v("搜索模板")]),t._v(" "),t.isaside?t._e():i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.showaside("add")}}},[t._v("新建模板")])],1)],1)],1),t._v(" "),i("div",{staticStyle:{background:"white"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.modelList,stripe:"",border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"模板编号",prop:"id",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.id)+"\n          ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"模板名称",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.name)+"\n          ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"模板简介",prop:"aim"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.aim)+"\n          ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"模版编码",prop:"code"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(e.row.code)+"\n          ")]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"范围",prop:"scope",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.scope?i("span",[t._v("个人")]):t._e(),t._v(" "),1===e.row.scope?i("span",[t._v("科室")]):t._e(),t._v(" "),2===e.row.scope?i("span",[t._v("全院")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"模板类型",prop:"type",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.type?i("span",[t._v("检查")]):t._e(),t._v(" "),1===e.row.type?i("span",[t._v("检验")]):t._e(),t._v(" "),2===e.row.type?i("span",[t._v("处置")]):t._e()]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",prop:"id",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return t.editModel(e.row)}}},[t._v("修改")]),t._v(" "),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return t.deleteModel(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.pageNum,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"pageNum",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.getModelList}})],1)],1)])],1),t._v(" "),t.isaside?i("el-main",{staticStyle:{padding:"0 0 0 0"}},[t.edit?i("el-button",{staticStyle:{"margin-left":"30px","margin-top":"30px","margin-bottom":"30px"},attrs:{type:"primary"},on:{click:t.updateModel}},[t._v("提交修改")]):t._e(),t._v(" "),t.edit?t._e():i("el-button",{staticStyle:{"margin-left":"30px","margin-top":"30px","margin-bottom":"30px"},attrs:{type:"primary"},on:{click:t.createModel}},[t._v("新建模板")]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:t.showaside}},[t._v("取消")]),t._v(" "),i("el-form",{attrs:{model:t.model,"label-width":"140px",inline:""}},[i("el-form-item",{attrs:{label:"模板名称"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入模板名称"},model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"模板简介"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"模板简介"},model:{value:t.model.aim,callback:function(e){t.$set(t.model,"aim",e)},expression:"model.aim"}})],1),t._v(" "),t.edit?i("el-form-item",{attrs:{label:"模板编码"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"模板编码",disabled:""},model:{value:t.model.code,callback:function(e){t.$set(t.model,"code",e)},expression:"model.code"}})],1):t._e(),t._v(" "),t.edit?i("el-form-item",{attrs:{label:"创建时间"}},[i("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"",disabled:""},model:{value:t.model.createTime,callback:function(e){t.$set(t.model,"createTime",e)},expression:"model.createTime"}})],1):t._e(),t._v(" "),t.edit?t._e():i("el-form-item",{attrs:{label:"记录类型"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px"},attrs:{placeholder:"请选择类型",clearable:""},model:{value:t.model.type,callback:function(e){t.$set(t.model,"type",e)},expression:"model.type"}},t._l([{key:0,value:"检查"},{key:1,value:"检验"},{key:2,value:"处置"}],(function(t){return i("el-option",{key:t.key,attrs:{label:t.value,value:t.key}})})),1)],1)],1),t._v(" "),i("el-button",{staticStyle:{"margin-bottom":"10px","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.addItem}},[t._v("编辑项目")]),t._v(" "),i("el-table",{staticStyle:{"margin-bottom":"50px"},attrs:{data:t.nondrugList,stripe:"",border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"项目编码",prop:"code"}}),t._v(" "),i("el-table-column",{attrs:{label:"项目名称",prop:"name",width:"300px"}}),t._v(" "),i("el-table-column",{attrs:{label:"项目规格",prop:"format"}}),t._v(" "),i("el-table-column",{attrs:{label:"项目单价(元)",prop:"price"}}),t._v(" "),i("el-table-column",{attrs:{label:"所属费用科目",prop:"expClassId"}})],1)],1):t._e()],1),t._v(" "),i("el-dialog",{attrs:{title:"添加非药品项目",width:"800px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticStyle:{height:"370px"}},[i("el-transfer",{staticStyle:{width:"1000px"},attrs:{filterable:"",titles:["非药品项目","模板内容"],"filter-placeholder":"项目名搜索",data:t.chonondruglist},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.option;return i("span",{},[t._v(t._s(n.name))])}}]),model:{value:t.choices,callback:function(e){t.choices=e},expression:"choices"}}),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px","margin-left":"20px",float:"right"},attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!t.dialogVisible}}},[t._v("取消")]),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px",float:"right"},attrs:{type:"primary"},on:{click:t.confirmItem}},[t._v("确定")])],1)])],1)},l=[],a=(i("e186"),i("c6da")),o=(i("a450"),i("1bc7"),i("aa18"),i("982e"),i("15d7")),s=i("a6b2"),r=i("333d"),c=i("ed08"),d={components:{Pagination:r["a"]},data:function(){return{chonondruglist:[],choices:[],dialogVisible:!1,alldrugList:[],nondrugList:[],edit:0,model:{},loading:!1,isaside:!1,asidewidth:"100%",total:0,listQuery:{nonDrugIdList:"",id:"",status:1,name:"",scope:0,ownId:this.$store.getters.id,aim:"",code:"",type:"",pageSize:20,pageNum:1,isAdmin:"0"},modelList:[],queryModel:{name:"",range:"",type:""}}},created:function(){this.getModelList(),this.getAllNondrug()},methods:{deleteModel:function(t){var e=this;this.$confirm("确认删除当前模板?","警告",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])(t.id).then((function(t){e.getModelList(),e.$notify({title:"成功",message:t.message,type:"success",duration:2e3})}))}))},createModel:function(){var t=this,e=Object(c["c"])(this.model);e.status=1,e.ownId=this.$store.getters.id,e.nonDrugIdList=Object(c["c"])(this.choices),e.scope=0,Object(o["a"])(e).then((function(e){t.getModelList(),t.$notify({title:"成功",message:"成功创建模板",type:"success",duration:2e3})})),this.showaside()},updateModel:function(){var t=this,e=Object(c["c"])(this.model);e.nonDrugIdList=Object(c["c"])(this.choices),Object(o["d"])(e).then((function(e){t.getModelList(),t.$notify({title:"成功",message:e.message,type:"success",duration:2e3})})),this.showaside()},confirmItem:function(){var t=this;this.nondrugList=this.alldrugList.filter((function(e){if(t.choices.includes(e.id))return!0})),this.dialogVisible=!this.dialogVisible},addItem:function(){var t=this;if(0===this.model.type||1===this.model.type||2===this.model.type)return this.chonondruglist=this.alldrugList.filter((function(e){return e.recordType===t.model.type+1})),void(this.dialogVisible=!0);this.getModelList(),this.$notify({title:"警告",message:"请先选择类型！",type:"warning",duration:2e3})},getAllNondrug:function(){var t=this;Object(s["c"])().then((function(e){t.alldrugList=e.data,t.alldrugList.forEach((function(t){t.label=t.name,t.key=t.id}))}))},getModelList:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(o["c"])(this.listQuery).then((function(t){e.modelList=t.data.list,e.total=t.data.total}));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),searchModel:function(){this.loading=!0,this.getModelList(),this.loading=!1},showaside:function(t){"100%"===this.asidewidth?this.asidewidth="0%":this.asidewidth="100%",this.isaside=!this.isaside,"edit"===t?this.edit=1:"add"===t?(this.choices=[],this.nondrugList=[],this.model={},this.edit=0):this.edit=0},editModel:function(t){this.choices=Object(c["c"])(t.nonDrugIdList),this.nondrugList=this.alldrugList.filter((function(e){if(t.nonDrugIdList.includes(e.id))return!0})),this.model=Object(c["c"])(t),this.model.createTime=Object(c["f"])(this.model.createTime),this.showaside("edit")}}},u=d,p=(i("33b8"),i("cba8")),m=Object(p["a"])(u,n,l,!1,null,null,null);e["default"]=m.exports}}]);